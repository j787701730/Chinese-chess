<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>象棋</title>
  <style>
    body * {
      box-sizing: border-box;
    }

    #chess {
      margin: 25px;
      width: 720px;
      height: 800px;
      background: url("chess.jpg") no-repeat center;
      background-size: 678px;
      position: relative;
    }

    .row::after {
      content: '';
      display: block;
      clear: both;
    }

    .row {
    }

    .row > div {
      display: inline-block;
      width: 80px;
      height: 80px;
      border-radius: 50px;
      line-height: 68px;
      /*background: #eee;*/
      border: 2px solid transparent;
      text-align: center;
      float: left;
    }

    .red,
    .black {
      background: #fff;
      border-radius: 50px;
      font-weight: bold;
      font-size: 40px;
      width: 100%;
      height: 100%;
      position: relative;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .red::before,
    .black::before {
      position: absolute;
      content: '';
      top: 4px;
      left: 4px;
      width: 62px;
      height: 62px;
      border: 1px solid transparent;
      border-radius: 40px;
    }

    .red::before {
      border-color: red;
    }

    .black::before {
      border-color: black;
    }

    .red {
      color: red;
      border: 2px solid red;
    }

    .black {
      color: black;
      border: 2px solid black;
    }

    .row .border {
      border-color: green;
    }

    .row > div:hover {
      /*border-color: blue;*/
    }

    .row .move {
      border-color: #ccc;
    }

    .row .kill {
      border-color: yellow;
    }
  </style>
</head>
<body>
<div id="chess">
  <div class="row row0" data-x="0">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row1" data-x="1">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row2" data-x="2">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row3" data-x="3">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row4" data-x="4">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row5" data-x="5">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row6" data-x="6">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row7" data-x="7">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row8" data-x="7">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
  <div class="row row9" data-x="9">
    <div data-y="0"></div>
    <div data-y="1"></div>
    <div data-y="2"></div>
    <div data-y="3"></div>
    <div data-y="4"></div>
    <div data-y="5"></div>
    <div data-y="6"></div>
    <div data-y="7"></div>
    <div data-y="8"></div>
  </div>
</div>
<script src="./jquery3.js"></script>
<script>
  function Chess() {
    var self = this;
    this.chessmen = {
//保存所有棋子的初始位置坐标
      redC1: {r: 0, c: 0, x: -144, y: 0, name: '车', color: 'red'},
      redC2: {r: 0, c: 8, x: -144, y: 0, name: '车', color: 'red'},
      redM1: {r: 0, c: 1, x: -108, y: 0, name: '马', color: 'red'},
      redM2: {r: 0, c: 7, x: -108, y: 0, name: '马', color: 'red'},
      redX1: {r: 0, c: 2, x: -72, y: 0, name: '相', color: 'red'},
      redX2: {r: 0, c: 6, x: -72, y: 0, name: '相', color: 'red'},
      redS1: {r: 0, c: 3, x: -36, y: 0, name: '仕', color: 'red'},
      redS2: {r: 0, c: 5, x: -36, y: 0, name: '仕', color: 'red'},
      redB2: {r: 0, c: 4, x: 0, y: 0, name: '帅', color: 'red'},
      redP1: {r: 2, c: 1, x: -180, y: 0, name: '炮', color: 'red'},
      redP2: {r: 2, c: 7, x: -180, y: 0, name: '炮', color: 'red'},
      redZ1: {r: 3, c: 0, x: -216, y: 0, name: '兵', color: 'red'},
      redZ2: {r: 3, c: 2, x: -216, y: 0, name: '兵', color: 'red'},
      redZ3: {r: 3, c: 4, x: -216, y: 0, name: '兵', color: 'red'},
      redZ4: {r: 3, c: 6, x: -216, y: 0, name: '兵', color: 'red'},
      redZ5: {r: 3, c: 8, x: -216, y: 0, name: '兵', color: 'red'},

      blueC1: {r: 9, c: 0, x: -144, y: -36, name: '车', color: 'black'},
      blueC2: {r: 9, c: 8, x: -144, y: -36, name: '车', color: 'black'},
      blueM1: {r: 9, c: 1, x: -108, y: -36, name: '马', color: 'black'},
      blueM2: {r: 9, c: 7, x: -108, y: -36, name: '马', color: 'black'},
      blueX1: {r: 9, c: 2, x: -72, y: -36, name: '象', color: 'black'},
      blueX2: {r: 9, c: 6, x: -72, y: -36, name: '象', color: 'black'},
      blueS1: {r: 9, c: 3, x: -36, y: -36, name: '士', color: 'black'},
      blueS2: {r: 9, c: 5, x: -36, y: -36, name: '士', color: 'black'},
      blueB2: {r: 9, c: 4, x: 0, y: -36, name: '将', color: 'black'},
      blueP1: {r: 7, c: 1, x: -180, y: -36, name: '炮', color: 'black'},
      blueP2: {r: 7, c: 7, x: -180, y: -36, name: '炮', color: 'black'},
      blueZ1: {r: 6, c: 0, x: -216, y: -36, name: '卒', color: 'black'},
      blueZ2: {r: 6, c: 2, x: -216, y: -36, name: '卒', color: 'black'},
      blueZ3: {r: 6, c: 4, x: -216, y: -36, name: '卒', color: 'black'},
      blueZ4: {r: 6, c: 6, x: -216, y: -36, name: '卒', color: 'black'},
      blueZ5: {r: 6, c: 8, x: -216, y: -36, name: '卒', color: 'black'}
    };
    this.$chess = $('#chess');


    let flag = 'red';

    this.$chess.on('click', '.red,.black', function () {

      if ($(this).hasClass('red')) {
        // 红
        if (flag === 'red') {
          $('.row>div').removeClass('border');
          $(this).parent().addClass('border');
          switch ($(this).html()) {
            case '帅':
              self.boosMove('red', $(this));
              break;
            case '仕':
              break;
            case '相':
              break;
            case '马':
              break;
            case '车':
              break;
            case '炮':
              break;
            case '兵':
              break;
          }
        }
      } else {
        // 黑
        if (flag === 'black') {
          $('.row>div').removeClass('border');
          $(this).parent().addClass('border');
        }
      }
    });
    // $chess.on('mouseenter', '.row div', function () {
    //   console.log($(this));
    // })


    this.init();
  }

  Chess.prototype = {
    constructor: Chess,
    init: function () {
      for (val in this.chessmen) {
        var el = this.chessmen[val];
        let cls = '.row' + el.r;
        this.$chess.find(cls).children('div').eq(el.c).html('<div class="man ' + el.color + '">' + el.name + '</div>');
      }
    },
    boosMove: function (type, ths) {
      // 将帅
      var x = parseInt(ths.parents('.row').attr('data-x')),
        y = parseInt(ths.parent().attr('data-y'));
      console.log(x, y);
      var arr = [x - 1, x + 1];
      $.each(arr, function (i, el) {
        if ($('.row' + x).children().eq(el).children('.black').lenth) {
          $('.row' + x).children().eq(el).addClass('kill');
        } else if ($('.row' + x).children().eq(el).children('.red').lenth) {

        } else {
          $('.row' + x).children().eq(el).addClass('move');
        }
      });
      arr = [y - 1, y + 1];
      $.each(arr, function (i, el) {
        if ($('.row' + el).children().eq(x).children('.black').lenth) {
          $('.row' + el).children().eq(x).addClass('kill');
        } else if ($('.row' + el).children().eq(x).children('.red').lenth) {

        } else {
          $('.row' + el).children().eq(x).addClass('move');
        }
      });
    }
  };
  const chess = new Chess();


</script>
</body>
</html>